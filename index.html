<!doctype html public="â™¥">
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Ember simple App</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    
    <script type="text/x-handlebars" data-template-name="application">
        {{! this is our main template which is called application }}
        {{! all our other templates are injected into this outlet }}
        {{! http://emberjs.com/guides/routing/generated-objects/#toc_generated-views-and-templates }}
        <div class="main">
        {{outlet}}
        </div>
    </script>
    
    <script type="text/x-handlebars" data-template-name="users">
        {{! this is the users template (associated with the usersRoute and the usersController) }}
        {{! naming convetions are VERY important in Ember }}
        <ul class="user-list">
            <li class="create-button">{{#linkTo "users.create" class="icon-plus"}}{{/linkTo}}</li>
            
            {{! this is our users loop, here controller is usersController }}
            {{#each user in controller}}
            <li>
                {{! linkTo are <a> tags but Ember handles for us the "active" class when clicking on it }}
                {{! basically here it means user.name will be surrounded by <a href="user/user_id">user.name</a> }}
                {{! http://emberjs.com/guides/templates/links/#toc_links-the-code-linkto-code-helper }}
                {{! and http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_linkTo }}
                {{#linkTo "user" user}}
                    {{user.name}}
                {{/linkTo}}
            </li>
            {{/each}}
        </ul>
        
        {{! see the linkTo tags a few lines above? This outlet will host views reached by clicking on them (the linkTo tags) }}
        <div class="user-pane">
            {{outlet}}
        </div>
    </script>
    
    <script type="text/x-handlebars" data-template-name="user">
        {{! "user-profile" and "pane" are static class names }}
        {{! if "editMode" is true, "scaleout" will be printed }}
        {{! if "editMode" is false, then "scalein" will be printed }}
        {{! http://emberjs.com/guides/templates/binding-element-class-names/#toc_binding-to-boolean-values }}
        <div {{bindAttr class=":user-profile :pane editMode:scaleout:flipin"}}>
            <div class="tools">
                <button class="icon-pencil" {{action edit}}></button>
            </div>
            
            <img {{bindAttr src="avatarUrl"}}>
            <h2>{{name}}</h2>
            <address>{{email}}</address>
            
            {{! partials are a good way to clean a bit the code, think of it as includes in php }}
            {{! remember to start partials template name by a _ }}
            {{! here we inject the partial _faces, it contains some reusable divs }}
            {{partial faces}}
        </div>
        
        {{! again here use the editMode property to switch class names between "shown" and "hidden" }}
        <div {{bindAttr class=":user-edit :pane editMode:shown:hidden"}}>
            {{outlet}}
        </div>
    </script>
    
    <script type="text/x-handlebars" data-template-name="user/edit">
        <div class="line">
            <label for="avatarUrl">Choose your avatar</label>
            {{view Ember.TextField valueBinding="avatarUrl"}}
        </div>
        <div class="line">
            <label for="name">Your name</label>
            {{view Ember.TextField valueBinding="name"}}
        </div>
        <div class="line">
            <label for="email">Your email</label>
            {{view Ember.TextField valueBinding="email"}}
        </div>
        <div class="line">
            <label for="bio">Your short bio</label>
            {{view Ember.TextArea valueBinding="bio"}}
        </div>
        <div class="line">
            <button class="blue fright" {{action saveRecord}}>save <i class="icon-arrow-right"></i></button>
            <button class="icon-arrow-left fleft" {{action closeEditing}}> back </button>
        </div>
    </script>
    
    <script type="text/x-handlebars" data-template-name="users/create">
        <div class="user-create pane flipin">
            <div class="line">
                <label for="avatarUrl">Choose your avatar</label>
                {{view Ember.TextField valueBinding="avatarUrl"}}
            </div>
            <div class="line">
                <label for="name">Your name</label>
                {{view Ember.TextField valueBinding="name"}}
            </div>
            <div class="line">
                <label for="email">Your email</label>
                {{view Ember.TextField valueBinding="email"}}
            </div>
            <div class="line">
                <label for="bio">Your short bio</label>
                {{view Ember.TextArea valueBinding="bio"}}
            </div>
            <div class="line">
                <button class="blue fright" {{action addUser}}>add user</button>
            </div>
            {{partial faces}}
        </div>
    </script>
    
    <script type="text/x-handlebars" data-template-name="_faces">
        <span class="face-left"></span>
        <span class="face-right"></span>
        <span class="face-top"></span>
        <span class="face-bottom"></span>
        <span class="face-back"></span>
    </script>
    
    <script src="js/libs/jquery-1.9.1.js"></script>
    <script src="js/libs/handlebars.js"></script>
    <script src="js/libs/ember-1.0.0-rc.1.js"></script>
    <script src="js/libs/ember-data.js"></script>
    <script src="js/app.js"></script>
    <script src="js/model.js"></script>
</body>
</html>
